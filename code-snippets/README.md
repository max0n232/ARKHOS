# Code Snippets –¥–ª—è Studiokook SEO

## –û–±–∑–æ—Ä —Ä–µ—à–µ–Ω–∏–π

| –£—Ä–æ–≤–µ–Ω—å | Snippet | –†—É—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞ | –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è |
|---------|---------|---------------|---------------|
| **–ë–∞–∑–æ–≤—ã–π** | 05 (hardcoded) | ‚ùå –ù–µ—Ç | ‚ö†Ô∏è –ù—É–∂–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å PHP |
| **–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π** | 06 (Supabase) | ‚ùå –ù–µ—Ç | ‚úÖ –ß–µ—Ä–µ–∑ –ë–î |

---

## –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ê–∫—Ç–∏–≤–Ω—ã–µ snippets:

| # | Snippet | –°—Ç–∞—Ç—É—Å | Scope |
|---|---------|--------|-------|
| 01 | ~~hreflang-tags~~ | ‚ùå –î–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å | TranslatePress –¥–µ–ª–∞–µ—Ç —ç—Ç–æ |
| 02 | fix-canonical-urls | ‚úÖ –ê–∫—Ç–∏–≤–µ–Ω | Front-end only |
| 03 | ~~seo-meta-translations~~ | ‚ùå –£–¥–∞–ª–∏—Ç—å | –ó–∞–º–µ–Ω—ë–Ω –Ω–∞ 05 |
| 04 | 301-redirects | ‚è≥ –ü–æ–∑–∂–µ | –ü–æ—Å–ª–µ —Å–º–µ–Ω—ã slugs |
| 05 | auto-seo-translations | ‚úÖ –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å | Front-end only |
| 06 | supabase-seo-sync | ‚è≥ –ë—É–¥—É—â–µ–µ | –ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Supabase |

---

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –®–∞–≥ 1: –î–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –ª–∏—à–Ω–∏–µ
1. WP Admin ‚Üí Code Snippets
2. –î–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å snippet 01 (hreflang) ‚Äî TranslatePress —ç—Ç–æ –¥–µ–ª–∞–µ—Ç
3. –î–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å snippet 03 ‚Äî –∑–∞–º–µ–Ω—ë–Ω –Ω–∞ 05

### –®–∞–≥ 2: –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å snippet 05
1. Code Snippets ‚Üí Add New
2. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ `05-auto-seo-translations.php` (–±–µ–∑ `<?php`)
3. Title: "Auto SEO Translations"
4. Scope: "Only run on site front-end"
5. Save & Activate

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å
```bash
curl -s "https://studiokook.ee/ru/" | grep -o '<title>[^<]*</title>'
```

–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
```html
<title>–ö—É—Ö–Ω–∏ –Ω–∞ –∑–∞–∫–∞–∑ –≤ –¢–∞–ª–ª–∏–Ω–Ω–µ | –ö—É—Ö–æ–Ω–Ω–∞—è –º–µ–±–µ–ª—å | Studiok√∂√∂k</title>
```

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                         –°–ï–ô–ß–ê–°                              ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  TranslatePress    ‚Üí  hreflang ‚úÖ                           ‚îÇ
‚îÇ  Snippet 02        ‚Üí  canonical ‚úÖ                          ‚îÇ
‚îÇ  Snippet 05        ‚Üí  title/meta –ø–µ—Ä–µ–≤–æ–¥—ã ‚úÖ                ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                        –ë–£–î–£–©–ï–ï                              ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  n8n workflow      ‚Üí  –ê–≤—Ç–æ–ø–µ—Ä–µ–≤–æ–¥ —Å—Ç—Ä–∞–Ω–∏—Ü —á–µ—Ä–µ–∑ AI         ‚îÇ
‚îÇ  Supabase          ‚Üí  –•—Ä–∞–Ω–µ–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–æ–≤                   ‚îÇ
‚îÇ  Snippet 06        ‚Üí  –ó–∞–≥—Ä—É–∑–∫–∞ –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –∏–∑ –ë–î             ‚îÇ
‚îÇ  Webhook           ‚Üí  –ê–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü

### –í–∞—Ä–∏–∞–Ω—Ç 1: Snippet 05 (hardcoded)

–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å `05-auto-seo-translations.php`, –¥–æ–±–∞–≤–∏—Ç—å –≤ –º–∞—Å—Å–∏–≤:

```php
'new-page-slug' => [
    'et' => ['title' => '...', 'description' => '...'],
    'ru' => ['title' => '...', 'description' => '...'],
    'en' => ['title' => '...', 'description' => '...'],
    'fi' => ['title' => '...', 'description' => '...']
]
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: Supabase (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```sql
INSERT INTO page_translations (page_id, slug, title_ru, title_en, title_fi, ...)
VALUES (123, 'new-page', '–†—É—Å—Å–∫–∏–π title', 'English title', 'Suomen otsikko', ...);
```

–ó–∞—Ç–µ–º –æ—á–∏—Å—Ç–∏—Ç—å –∫—ç—à:
```bash
curl -X POST "https://studiokook.ee/wp-json/studiokook/v1/clear-seo-cache" \
     -u "admin:APP_PASSWORD"
```

---

## –§–∞–π–ª—ã

```
code-snippets/
‚îú‚îÄ‚îÄ 01-hreflang-tags.php          ‚ùå –ù–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
‚îú‚îÄ‚îÄ 02-fix-canonical-urls.php     ‚úÖ –ê–∫—Ç–∏–≤–µ–Ω
‚îú‚îÄ‚îÄ 03-seo-meta-translations.php  ‚ùå –ó–∞–º–µ–Ω—ë–Ω
‚îú‚îÄ‚îÄ 04-301-redirects.php          ‚è≥ –ü–æ—Å–ª–µ —Å–º–µ–Ω—ã slugs
‚îú‚îÄ‚îÄ 05-auto-seo-translations.php  ‚úÖ –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨
‚îú‚îÄ‚îÄ 06-supabase-seo-sync.php      ‚è≥ –ü–æ—Å–ª–µ Supabase
‚îî‚îÄ‚îÄ README.md                     üìñ –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

---

## Troubleshooting

### Title –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è
1. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ snippet 05 –∞–∫—Ç–∏–≤–µ–Ω
2. –û—á–∏—Å—Ç–∏ –∫—ç—à: WP Admin ‚Üí Settings ‚Üí Performance ‚Üí Purge Cache
3. –ü—Ä–æ–≤–µ—Ä—å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Ñ–∏–ª—å—Ç—Ä–∞ (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å 1)

### –î—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è hreflang
1. –î–µ–∞–∫—Ç–∏–≤–∏—Ä—É–π snippet 01
2. TranslatePress —É–∂–µ –¥–æ–±–∞–≤–ª—è–µ—Ç hreflang

### 500 –æ—à–∏–±–∫–∞ –ø–æ—Å–ª–µ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
1. –ü–æ–¥–∫–ª—é—á–∏—Å—å –ø–æ FTP
2. –£–¥–∞–ª–∏ —Ñ–∞–π–ª: `wp-content/mu-plugins/code-snippets.php` (–≤—Ä–µ–º–µ–Ω–Ω–æ)
3. –ò–ª–∏ –≤ –ë–î: `UPDATE wp_snippets SET active = 0 WHERE name = '–ù–∞–∑–≤–∞–Ω–∏–µ';`
